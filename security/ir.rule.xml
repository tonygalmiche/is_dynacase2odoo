<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- is.plan.amelioration.continu 
        - Voir : Créateur + Codir + Sevice Directions + Service de l'utilisateur + Groupe lecture
        - Modifier : Créateur          
        -->
        <record id="is_plan_amelioration_continu_createur_rule" model="ir.rule">
            <field name="name">Accès en modification au créateur</field>
            <field name="model_id" ref="model_is_plan_amelioration_continu"/>
            <field name="domain_force">[('createur_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_amelioration_continu_codir_rule" model="ir.rule">
            <field name="name">Accès en lecture au groupe 'CODIR'</field>
            <field name="model_id" ref="model_is_plan_amelioration_continu"/>
            <field name="domain_force">[]</field>
            <field name="groups" eval="[(4, ref('is_plastigray16.is_codir_group'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_amelioration_continu_service_rule" model="ir.rule">
            <field name="name">Accès en lecture pour le Service du créateur</field>
            <field name="model_id" ref="model_is_plan_amelioration_continu"/>
            <field name="domain_force">[('service_id','!=',False),('service_id','=',user.is_service_id.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_amelioration_continu_groupe_lecture_rule" model="ir.rule">
            <field name="name">Accès en lecture pour le groupe d'accès en consultation</field>
            <field name="model_id" ref="model_is_plan_amelioration_continu"/>
            <field name="domain_force">[('groupe_acces_id.users','in',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_amelioration_continu_site_read_rule" model="ir.rule">
            <field name="name">Lecture par site si pas de groupe d'accès</field>
            <field name="model_id" ref="model_is_plan_amelioration_continu"/>
            <field name="domain_force">[("groupe_acces_id","=",False),("site_id","=",user.is_site_id.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>


        <!-- is.plan.action 
        - Modifier : pilot_id, is_gestionnaire_plan_action_group
        - Voir : La liste des responsables des actions + group_id
        -->
        <record id="is_plan_action_createur_rule" model="ir.rule">
            <field name="name">Accès en modification au créateur</field>
            <field name="model_id" ref="model_is_plan_action"/>
            <field name="domain_force">[('create_uid','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_action_pilot_rule" model="ir.rule">
            <field name="name">Accès en modification au pilote</field>
            <field name="model_id" ref="model_is_plan_action"/>
            <field name="domain_force">[('pilot_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_action_gestionnaire_rule" model="ir.rule">
            <field name="name">Accès en modification au groupe 'Gestionnaire des plans d'actions'</field>
            <field name="model_id" ref="model_is_plan_action"/>
            <field name="domain_force">[]</field>
            <field name="groups" eval="[(4, ref('is_dynacase2odoo.is_gestionnaire_plan_action_group'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_action_group_rule" model="ir.rule">
            <field name="name">Accès en en lecture au group_id</field>
            <field name="model_id" ref="model_is_plan_action"/>
            <field name="domain_force">[('group_id.users','in',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_plan_action_responsables_rule" model="ir.rule">
            <field name="name">Accès en lecture aux responsables des actions</field>
            <field name="model_id" ref="model_is_plan_action"/>
            <field name="domain_force">[('responsables_ids','in',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>





        <!-- is.action 
        - Modifier : pilot_id, resp_id, is_gestionnaire_plan_action_group
        - Voir : group_id
        -->
        <record id="is_action_createur_rule" model="ir.rule">
            <field name="name">Accès en modification au créateur</field>
            <field name="model_id" ref="model_is_action"/>
            <field name="domain_force">[('create_uid','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_action_pilot_rule" model="ir.rule">
            <field name="name">Accès en modification au pilote</field>
            <field name="model_id" ref="model_is_action"/>
            <field name="domain_force">[('pilot_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_action_resp_rule" model="ir.rule">
            <field name="name">Accès en modification au responsable</field>
            <field name="model_id" ref="model_is_action"/>
            <field name="domain_force">[('resp_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_action_gestionnaire_rule" model="ir.rule">
            <field name="name">Accès en modification au groupe 'Gestionnaire des plans d'actions'</field>
            <field name="model_id" ref="model_is_action"/>
            <field name="domain_force">[]</field>
            <field name="groups" eval="[(4, ref('is_dynacase2odoo.is_gestionnaire_plan_action_group'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>
        <record id="is_action_group_rule" model="ir.rule">
            <field name="name">Accès en en lecture au group_id</field>
            <field name="model_id" ref="model_is_action"/>
            <field name="domain_force">[('plan_action_id.group_id.users','in',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>


    </data>
</odoo>