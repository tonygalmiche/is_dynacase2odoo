<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="is_revue_de_contrat_mail_template" model="mail.template">
            <field name="name">Revue de contrat</field>
            <field name="model_id" ref="is_dynacase2odoo.model_is_revue_de_contrat"/>
            <field name="subject">[Revue de contrat][{{ object.name }}] état '{{ object.get_state_name() }}'</field>
            <field name="description">Revue de contrat</field>
            <field name="body_html" type="html">
                <div style="background-color:#f7f9f9">
                    <p>Bonjour,</p> 
                    <p>
                        <t t-out="user.name"/> vient de passer la '<t t-out="object._description"/>' 
                        <a t-att-href="object.get_doc_url()"><t t-out="object.name"/></a> à l'état '<t t-out="object.get_state_name()"/>'.
                    </p> 
                    <p>Merci d'en prendre connaissance.</p> 
                    <div><i>Destinataires : <t t-out="object.get_destinataires_name()"/></i></div>
                </div>
            </field>
            <field name="auto_delete" eval="False"/>
        </record>


        <record id="is_revue_de_contrat_actualisation_champs_calcules_action_server" model="ir.actions.server">
            <field name="name">Actualisation champs calculés</field>
            <field name="model_id" ref="model_is_revue_de_contrat"/>
            <field name="binding_model_id" ref="model_is_revue_de_contrat"/>
            <field name="state">code</field>
            <field name="code">records.actualisation_champs_calcules_action()</field>
            <field name="groups_id" eval="[(4, ref('base.group_system'))]"/>
        </record>
        <record model="ir.ui.view" id="view_is_revue_de_contrat_form">
            <field name="name">view.is.revue.de.contrat.form</field>
            <field name="model">is.revue.de.contrat</field>
            <field name="arch" type="xml">
                <form string="Revue de contrat">
                    <header>
                        <field name="dynacase_id" invisible="1"/>
                        <button 
                            name="lien_vers_dynacase_action"
                            string="Dynacase"
                            type="object" class="btn btn-info"
                            attrs="{'invisible': [('dynacase_id', '=', 0)]}" 
                            groups="base.group_system"
                        />
                        <button 
                            name="copie_assemblage_action"
                            string="Copie du dossier F"
                            type="object"
                            attrs="{'invisible': ['|',('state', '=', 'diffuse'),('rc_doc_moule_assemblage', '!=', 'c3')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                        <button 
                            name="vers_diffuse_action"
                            string="vers Diffusé"
                            type="object"
                            attrs="{'invisible': [('state', '=', 'diffuse')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                        <button 
                            name="vers_brouillon_action"
                            string="vers Brouillon"
                            type="object"
                            attrs="{'invisible': [('state', '=', 'brouillon')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                    
                        <button 
                            name="reviser_rc_action"
                            string="Réviser cette revue de contrat (indice)"
                            type="object"
                            attrs="{'invisible': [('state', '=', 'brouillon')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                        <button 
                            name="creation_revue_lancement_action"
                            string="Création revue de lancement"
                            type="object"
                            attrs="{'invisible': [('state', '=', 'brouillon')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                        <button 
                            name="creation_fiche_codification_action"
                            string="Créer une fiche de codification"
                            type="object"
                            attrs="{'invisible': [('state', '=', 'brouillon')]}" 
                            groups="is_dynacase2odoo.is_gestionnaire_revue_contrat_group"
                        />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <field name="active" invisible="1"/>
                        <widget name="web_ribbon" title="Archivé" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                        <notebook>
                            <page name="donnees_d_initialisation" string="Données d'initialisation">
                                <group>
                                    <group name="rc_initial_tab" string="Données d'initialisation">
                                        <field name="name"      attrs="{'invisible': [('rc_designation', '=', False)]}"/>
                                        <field name="rc_indice" attrs="{'invisible': [('rc_designation', '=', False)]}"/>
                                        <field 
                                            name="rc_doc_moule_assemblage" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('state', '=', 'brouillon')]
                                            }"
                                        />
                                        <field 
                                            name="rc_mouleid" 
                                            attrs="{
                                                'readonly':[('state','!=','brouillon')], 
                                                'invisible':[('rc_doc_moule_assemblage','not in',('c2','c3'))],
                                                'required':[('rc_doc_moule_assemblage','in',('c2','c3'))],
                                            }" 
                                        />
                                        <field 
                                            name="rc_dossierfid" 
                                            attrs="{
                                                'readonly':[('state','!=','brouillon')], 
                                                'invisible':[('rc_doc_moule_assemblage','!=','c1')],
                                                'required':[('rc_doc_moule_assemblage','=','c1')]
                                            }" 
                                        />
                                        <field name="rc_designation" attrs="{'invisible': [('rc_designation', '=', False)]}" />
                                        <field name="rc_ass_mouleid" widget="many2many_tags" attrs="{'invisible': [('rc_ass_mouleid', '=', [])]}" />
                                        <field 
                                            name="rc_type_automobile" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage', '=', False)]
                                            }" 
                                        />
                                        <field name="rc_daoid"/>
                                        <field name="rc_projetid" readonly="1"  attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}" />
                                        <field 
                                            name="rc_revue_contrat_assid" 
                                            attrs="{'invisible': [('rc_revue_contrat_assid', '=', False)]}" 
                                        />
                                    </group>
                                    <group name="rc_presentation_tab" string="Présentation de la pièce" attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}" >
                                        <field name="rc_client"/>

                                        <field name="rc_commercial"
                                           attrs="{
                                                'invisible': [('rc_client', '=', False)]
                                            }" 
                                        />
                                        <field name="rc_duration" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_product_dest" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_cust_wait" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_done_study" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    </group>
                                </group>
                                <group col="2" name="rc_presentation_tab" string="Principales dates" attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}" >
                                    <group name="rc_presentation_tab_date" string="Date">
                                        <field name="rc_cmd_date" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_dfn_ro_date" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_first_m_try" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_ei_pres" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_dms_date" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eop_date" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    </group>
                                    <group name="rc_presentation_tab_vendues" string="Nb pièces vendues">
                                        <field name="rc_cmd_date_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_dfn_ro_date_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_first_m_try_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_ei_pres_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_dms_date_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eop_date_nb" nolabel="1" colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                    </group>
                                </group>
                                <group string="Commentaire spécifique (essais supplémentaire)" attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}">
                                    <field name="rc_nb_pce_p_jal" colspan="2" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                </group>


                                <group string="Fiches de codification" col="4" colspan="4" attrs="{'invisible': [('fiche_codification_ids', '=', [])]}">
                                    <field name="fiche_codification_ids" nolabel="1" colspan="4" readonly="1" >
                                        <tree>
                                            <button title="Fiche de codification" name="action_acceder_fiche_codification"  type="object" icon="fa-search-plus"/>
                                            <field name="chrono"                    optional="show" widget="many2one_clickable"/>
                                            <field name="state"                     optional="show"/>
                                            <field name="code_pg"                   optional="show"/>
                                            <field name="date"                      optional="show"/>
                                            <field name="type_dossier"              optional="show"/>
                                            <field name="creation_modif"            optional="show"/>
                                            <field name="client_id"                 optional="show" widget="many2one_clickable"/>
                                            <field name="project_id"                optional="show" widget="many2one_clickable"/>
                                            <field name="chef_de_projet_id"         optional="show"/>
                                            <field name="etabli_par_id"             optional="show" widget="many2one_clickable"/>
                                            <field name="duree_vie"                 optional="show" widget="many2one_clickable"/>
                                            <field name="appel_offre_id"            optional="hide" widget="many2one_clickable"/>
                                            <field name="dossier_modif_variante_id" optional="hide" widget="many2one_clickable"/>
                                            <field name="revue_contrat_id"          optional="hide" widget="many2one_clickable"/>
                                            <field name="mold_id"                   optional="hide" widget="many2one_clickable"/>
                                            <field name="dossierf_id"               optional="hide" widget="many2one_clickable"/>
                                            <field name="type_presse"               optional="hide"/>
                                            <field name="tps_cycle"                 optional="hide"/>
                                            <field name="nb_empreintes"             optional="hide"/>
                                            <field name="nb_mod"                    optional="hide"/>
                                            <field name="designation"               optional="hide"/>
                                            <field name="code_client"               optional="hide"/>
                                            <field name="ref_plan"                  optional="hide"/>
                                            <field name="indice_plan"               optional="hide"/>
                                            <field name="type_uc"                   optional="hide"/>
                                            <field name="qt_uc"                     optional="hide"/>
                                            <field name="commentaire"               optional="hide"/>
                                            <field name="prev_annuelle"             optional="hide"/>
                                            <field name="date_dms"                  optional="hide"/>
                                            <field name="lot_livraison"             optional="hide"/>
                                            <field name="site_livraison"            optional="hide"/>
                                            <field name="create_date"               optional="hide"/>
                                            <field name="create_uid"                optional="hide"/>
                                            <field name="write_date"                optional="hide"/>
                                            <field name="write_uid"                 optional="hide"/>
                                            <field name="dynacase_id"               optional="hide" groups="base.group_system"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>




                            <page name="rc_donnees_economiques_tab" string="Données économiques et de fabrication"  attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}" >
                                <group name="rc_donnees_economiques_tab" string="Décomposition prix" col="4" colspan="4">
                                    <field name="decomposition_prix_ids" nolabel="1" colspan="4" attrs="{'readonly': [('state', '!=', 'brouillon')]}" >
                                        <form>
                                            <group col="3">
                                                <group>
                                                    <field name="rc_price_comp_article" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                    <field name="rc_reference_client" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_year_quantity" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_price_clientid" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                                <group>
                                                    <field name="rc_mat_part"  attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                                    <field name="rc_comp_part" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_va_injection"  attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                                    <field name="rc_va_assembly" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_emb_part" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_port_fee" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_logistic" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                                </group>
                                                <group>
                                                    <field name="rc_moul_amort" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_moul_amort_interne" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_moul_cagnotage"  attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                                    <field name="rc_moul_amort_commentaire" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_preserie_surcout" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_preserie_surcout_commentaire" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_sell_price"  attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_total"/>
                                                    <field name="rc_ecart" attrs="{'invisible':[('rc_ecart','=',0)]}" style="background-color:orange"/>
                                                </group>
                                            </group>
                                        </form>
                                        <tree>
                                            <field name="rc_price_comp_article" optional="show" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_reference_client" optional="show" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_year_quantity" optional="show" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_price_clientid" optional="show" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_mat_part" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_comp_part" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_va_injection" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_va_assembly" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_emb_part" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_port_fee" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_logistic" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_moul_amort" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_moul_amort_interne" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_moul_cagnotage" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_moul_amort_commentaire" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_preserie_surcout" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_preserie_surcout_commentaire" optional="hide" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_total" optional="show"/>
                                            <field name="rc_sell_price" optional="show" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                            <field name="rc_ecart" optional="show"/>
                                        </tree>
                                    </field>
                                    <group>
                                        <field name="rc_ca_annuel"/>
                                        <field name="rc_vac"/>
                                    </group>
                                </group>



                                <group name="rc_productivite_fr" string="Productivité" col="4" colspan="4">
                                    <field name="productivite_ids" nolabel="1" colspan="4" attrs="{'readonly': [('state', '!=', 'brouillon')]}" >
                                        <tree editable="bottom">
                                            <field 
                                                name="decomposition_prix_id"      
                                                attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" 
                                                domain="[('id', 'in', parent.decomposition_prix_ids)]"
                                            />
                                            <field name="rc_productivite_article"      readonly="1" force_save="1" optional="hide"/>
                                            <field name="rc_productivite_annee"        attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                            <field name="rc_productivite_productivite" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                        </tree>
                                    </field>
                                </group>
                                <group name="rc_previsions_fr" string="Prévisions" col="4" colspan="4">
                                    <field name="previsions_ids" nolabel="1" colspan="4" attrs="{'readonly': [('state', '!=', 'brouillon')]}" >
                                        <tree editable="bottom">
                                           <field 
                                                name="decomposition_prix_id"      
                                                attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" 
                                                domain="[('id', 'in', parent.decomposition_prix_ids)]"
                                            />
                                            <field name="rc_previsions_article"  readonly="1" force_save="1" optional="hide"/>
                                            <field name="rc_previsions_annee"    attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                            <field name="rc_previsions_quantite" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                        </tree>
                                    </field>
                                </group>




                                <group name="rc_donnees_fabrication_fr" string="Données de fabrication" attrs="{'invisible': [('rc_doc_moule_assemblage', 'not in', ('c2','c3'))]}">
                                    <field name="rc_site_fabrication" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field 
                                        name="rc_site_fabrication_autre" 
                                        attrs="{
                                            'readonly': [('state', '!=', 'brouillon')],
                                            'invisible': [('rc_site_fabrication', '!=', 'autre')],
                                        }"
                                    />
                                    <field name="rc_process_fabrication"  attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                    <field name="rc_nb_empreintes_moule" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_moulage_sur" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_tonnage_presse_vendu" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_stock_securite" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_stock_securite_commentaire" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                </group>

                              



                                <group name="rc_df_d_injection" string="Dossier injection" attrs="{'invisible': [('rc_doc_moule_assemblage', 'not in', ('c2','c3'))]}">
                                    <field name="rc_dfi_process_fab" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_dfi_schema_lieu_fab" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_dfi_classe_comrc" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                </group>





                                <group name="rc_ar_version" string="Versions Moule" col="4" colspan="4"  attrs="{'invisible': [('rc_doc_moule_assemblage', 'not in', ('c2','c3'))]}">
                                    <field name="version_ids" nolabel="1" colspan="4" attrs="{'readonly': [('state', '!=', 'brouillon')]}" >
                                        <form>
                                            <group col="3">
                                                <group string="Version">
                                                    <field name="rc_dfi_version"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field 
                                                        name="decomposition_prix_id"      
                                                        attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" 
                                                        domain="[('id', 'in', parent.decomposition_prix_ids)]"
                                                    />
                                                    <field name="rc_dfi_article" readonly="1" force_save="1"/>
                                                    <field name="rc_dfi_cycle"               attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_nb_emp"              attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_mod"                 attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_taux_rebut"          attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                                <group string="Matière 1">
                                                    <field name="rc_dfi_matiere" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_poids_piece"         attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_poids_carotte"       attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_car_reb"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_car_reb_pourcentage" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_mat_prix_vendu" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                               <group string="Matière 2">
                                                    <field name="rc_dfi_matiere2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_poids_piece2"         attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_poids_carotte2"       attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_car_reb2"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_car_reb_pourcentage2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_mat_prix_vendu2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                                <group string="Composants / Sous-traitance">
                                                    <field name="rc_dfi_comp" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_comp_prix_vendu" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                                                    <field name="rc_dfi_sous_traitance" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_sous_traitance_prix" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                                 <group string="Emballage">
                                                    <field name="rc_dfi_desc_emb" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_qte_carton" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_qte_palette" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_lot_liv" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_multiple_liv" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                    <field name="rc_dfi_lot_fab" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                                                </group>
                                            </group>
                                        </form>
                                        <tree>
                                            <field name="rc_dfi_version"        optional="show"/>
                                            <field name="decomposition_prix_id" optional="hide"/>
                                            <field name="rc_dfi_article"        optional="show"/>
                                            <field name="rc_dfi_cycle"          optional="show"/>
                                            <field name="rc_dfi_nb_emp"         optional="show"/>
                                            <field name="rc_dfi_mod"            optional="show"/>
                                            <field name="rc_dfi_taux_rebut"     optional="hide"/>
 
                                            <field name="rc_dfi_matiere"              optional="show"/>
                                            <field name="rc_dfi_poids_piece"          optional="show"/>
                                            <field name="rc_dfi_poids_carotte"        optional="show"/>
                                            <field name="rc_dfi_car_reb"              optional="show"/>
                                            <field name="rc_dfi_car_reb_pourcentage"  optional="show"/>
                                            <field name="rc_dfi_mat_prix_vendu"       optional="show"/>

                                            <field name="rc_dfi_matiere2"             optional="hide"/>
                                            <field name="rc_dfi_poids_piece2"         optional="hide"/>
                                            <field name="rc_dfi_poids_carotte2"       optional="hide"/>
                                            <field name="rc_dfi_car_reb2"             optional="hide"/>
                                            <field name="rc_dfi_car_reb_pourcentage2" optional="hide"/>
                                            <field name="rc_dfi_mat_prix_vendu2"      optional="hide"/>

                                            <field name="rc_dfi_comp"                 optional="hide"/>
                                            <field name="rc_dfi_comp_prix_vendu"      optional="hide"/>
                                            <field name="rc_dfi_sous_traitance"       optional="hide"/>
                                            <field name="rc_dfi_sous_traitance_prix"  optional="hide"/>
                                            <field name="rc_dfi_desc_emb"             optional="hide"/>
                                            <field name="rc_dfi_qte_carton"           optional="hide"/>
                                            <field name="rc_dfi_qte_palette"          optional="hide"/>
                                            <field name="rc_dfi_lot_liv"              optional="hide"/>
                                            <field name="rc_dfi_multiple_liv"         optional="hide"/>
                                            <field name="rc_dfi_lot_fab"              optional="hide"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <field name="rc_dfi_temp_occ_pm" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                </group>
                                <group name="rc_df_d_emballage" string="Dossier assemblage" attrs="{'invisible': [('rc_doc_moule_assemblage', 'not in', ('c1'))]}">
                                    <field name="rc_dfe_desc_proc" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    <field name="rc_dfe_sch_lieu_fab" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                </group>



                                <group name="rc_ar_dfe_version" string="Versions Dossier F" col="4" colspan="4" attrs="{'invisible': [('rc_doc_moule_assemblage', 'not in', ('c1'))]}">
                                    <field name="dfe_version_ids" nolabel="1" colspan="4" attrs="{'readonly': [('state', '!=', 'brouillon')]}" >
                                        <form>
                                            <group>
                                                <field name="rc_dfe_version" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_comp" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_comp_pri_vendu" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_cycle" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_mod" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_taux_rebut" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_desc_emaballage" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_sous_traitance" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_sous_traitance_prix" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_qte_carton" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_qte_palette" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_lot_livraison" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_multiple_liv" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                                <field name="rc_dfe_lot_fab" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"  />
                                            </group>
                                        </form>
                                        <tree>
                                            <field name="rc_dfe_version" optional="show"/>
                                            <field name="rc_dfe_comp" optional="show"/>
                                            <field name="rc_dfe_comp_pri_vendu" optional="show"/>
                                            <field name="rc_dfe_cycle" optional="show"/>
                                            <field name="rc_dfe_mod" optional="show"/>
                                            <field name="rc_dfe_taux_rebut" optional="hide"/>
                                            <field name="rc_dfe_desc_emaballage" optional="hide"/>
                                            <field name="rc_dfe_sous_traitance" optional="hide"/>
                                            <field name="rc_dfe_sous_traitance_prix" optional="hide"/>
                                            <field name="rc_dfe_qte_carton" optional="hide"/>
                                            <field name="rc_dfe_qte_palette" optional="hide"/>
                                            <field name="rc_dfe_lot_livraison" optional="hide"/>
                                            <field name="rc_dfe_multiple_liv" optional="hide"/>
                                            <field name="rc_dfe_lot_fab" optional="hide"/>
                                        </tree>
                                    </field>
                                </group>
                                <group name="rc_df_fr_pieces_jointes" string="Pièces jointes">
                                    <field name="rc_df_engagement_faisabilite" widget="many2many_binary" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                </group>
                                <group name="rc_df_engagement_faisabilite_autre_ar" string="Engagement de faisabilité (Autres)">
                                    <field name="rc_df_engagement_faisabilite_autre" widget="many2many_binary" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                </group>
                                <group>
                                    <field name="rc_df_fiche_capacitaire" widget="many2many_binary" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                </group>


                                <!--                                 
                                <group name="rc_eiv_fr" string="Enveloppe investissement vendue">
                                    <label for="rc_eiv_moule"            attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}"/>
                                    <div class="o_row no-gutters d-flex" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                        <field name="rc_eiv_moule"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_moule_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_etude"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_etude"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_etude_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_main_prehension"  attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}"/>
                                    <div class="o_row no-gutters d-flex" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                        <field name="rc_eiv_main_prehension"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_main_prehension_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_barre_chaude"     attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}"/>
                                    <div class="o_row no-gutters d-flex" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                        <field name="rc_eiv_barre_chaude"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_barre_chaude_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_gab_controle"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_gab_controle"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_gab_controle_cmt"    class="oe_inline width100" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_mach_spec"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_mach_spec"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_mach_spec_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_plan_valid"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_plan_valid"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_plan_valid_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_mis_point"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_mis_point"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_mis_point_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_pack"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_pack"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_pack_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_amort"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_amort"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_amort_cmt"    class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>  
                                    </div>
                                    <label for="rc_eiv_total"/>
                                    <div class="o_row no-gutters d-flex">
                                        <field name="rc_eiv_total"        class="oe_inline" nolabel="1" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                    </div>
                                </group> 
                                -->

                                <group name="rc_eiv_fr" string="Enveloppe investissement vendue"/>
                                <group col="6" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                    <group><label for="rc_eiv_moule"      colspan="2"/></group>
                                    <group><field name="rc_eiv_moule"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_moule_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_etude"      colspan="2"/></group>
                                    <group><field name="rc_eiv_etude"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_etude_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                    <group><label for="rc_eiv_main_prehension"      colspan="2"/></group>
                                    <group><field name="rc_eiv_main_prehension"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_main_prehension_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6" attrs="{'invisible': [('rc_doc_moule_assemblage','=','c1')]}">
                                    <group><label for="rc_eiv_barre_chaude"      colspan="2"/></group>
                                    <group><field name="rc_eiv_barre_chaude"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_barre_chaude_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_gab_controle"      colspan="2"/></group>
                                    <group><field name="rc_eiv_gab_controle"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_gab_controle_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_mach_spec"      colspan="2"/></group>
                                    <group><field name="rc_eiv_mach_spec"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_mach_spec_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_plan_valid"      colspan="2"/></group>
                                    <group><field name="rc_eiv_plan_valid"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_plan_valid_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_mis_point"      colspan="2"/></group>
                                    <group><field name="rc_eiv_mis_point"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_mis_point_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_pack"      colspan="2"/></group>
                                    <group><field name="rc_eiv_pack"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_pack_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_amort"      colspan="2"/></group>
                                    <group><field name="rc_eiv_amort"     colspan="2" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                    <group><field name="rc_eiv_amort_cmt" colspan="8" attrs="{'readonly': [('state', '!=', 'brouillon')]}" nolabel="1"/></group>
                                </group>
                                <group col="6">
                                    <group><label for="rc_eiv_total"  colspan="2"/></group>
                                    <group><field name="rc_eiv_total" colspan="2" nolabel="1"/></group>
                                </group>
                              


                                <!-- 
                                <group name="rc_eiv_fr" string="Enveloppe investissement vendue" col="6" >
                                    <group>
                                        <field 
                                            name="rc_eiv_moule"  
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                        <field name="rc_eiv_etude" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                       <field 
                                            name="rc_eiv_main_prehension"  
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                       <field 
                                            name="rc_eiv_barre_chaude"  
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                        <field name="rc_eiv_gab_controle" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eiv_mach_spec"    attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eiv_plan_valid"   attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_mis_point"    attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eiv_pack"         attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eiv_amort"        attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_eiv_total"/>
                                    </group>
                                    <group>
                                        <field 
                                            name="rc_eiv_moule_cmt"  
                                            nolabel="1" colspan="10"
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                        <field name="rc_eiv_etude_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field 
                                            name="rc_eiv_main_prehension_cmt"  
                                            nolabel="1" colspan="10"
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                        <field 
                                            name="rc_eiv_barre_chaude_cmt"  
                                            nolabel="1" colspan="10"
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_doc_moule_assemblage','=','c1')]
                                            }"
                                        />
                                        <field name="rc_eiv_gab_controle_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_mach_spec_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_plan_valid_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_mis_point_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_pack_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                        <field name="rc_eiv_amort_cmt" nolabel="1" colspan="10" attrs="{'readonly': [('state', '!=', 'brouillon')]}"/>
                                    </group>
                                </group>
                                -->
                            </page>


                            <page name="rc_specificites_tab" string="Spécificités et Éléments qualités" attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}" >
                                <group name="rc_specificites_tab" string="Spécificités">
                                    <group>
                                        <field name="rc_sp_type_piece" widget="radio" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_sp_aspect" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_sp_piece_technique"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    </group>
                                    <group>
                                    </group>
                                </group>
                                <group>
                                    <label for="rc_sp_piece_reglem" />
                                    <div>
                                        <field name="rc_sp_piece_reglem" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_piece_reglem_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_piece_reglem', '=', True)]
                                            }" 
                                        />
                                    </div>
                                    <label for="rc_sp_piece_sec" />
                                    <div>
                                        <field name="rc_sp_piece_sec" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_piece_sec_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_piece_sec', '=', True)]
                                            }"
                                        />
                                    </div>
                                    <label for="rc_sp_piece_sec2" />
                                    <div>
                                        <field name="rc_sp_piece_sec2" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_piece_sec2_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_piece_sec2', '=', True)]
                                            }"
                                        />
                                    </div>
                                    <label for="rc_sp_com_exig_part" />
                                    <div>
                                        <field name="rc_sp_com_exig_part" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_com_exig_part_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_com_exig_part', '=', True)]
                                            }" 
                                        />
                                    </div>
                                    <label for="rc_sp_crs" />
                                    <div>
                                        <field name="rc_sp_crs" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_crs_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_crs', '=', True)]
                                            }"
                                        />
                                    </div>
                                    <label for="rc_sp_carac_spec" />
                                    <div>
                                        <field name="rc_sp_carac_spec" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_carac_spec_cmt" class="oe_no_button" style="width: 80%" widget="char" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_carac_spec', '=', True)]
                                            }" 
                                        />
                                    </div>
                                    <label for="rc_sp_mat_con_pg" />
                                    <div>
                                        <field name="rc_sp_mat_con_pg" class="oe_no_button" style="width: 20%" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field 
                                            name="rc_sp_mat_con_pg_cmt" class="oe_no_button" style="width: 80%" widget="char"
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'required': [('rc_sp_mat_con_pg', '=', True)]
                                            }"
                                        />
                                    </div>
                                </group>
                                <group>
                                    <group name="rc_edl_at_fr" string="Liste modele auto" attrs="{'invisible': [('rc_type_automobile', '!=', 'Oui')]}">
                                        <field name="rc_edl_at_n_ppm" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_eng_fais" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_syn_am_proc" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_synop_fabr"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_at_plan_surv" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_car_spec" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_plan_piece" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_pres_util" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_fiche_tech_mat" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_at_rapport_ctrl" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_cap" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_plan_m_ctrl"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_at_moy_ctrl" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_ut_moy_ctrl"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_at_plan_valid" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_rap_ess_lab" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_acc_mont" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_acc_style"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_at_fic_cond" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_dec_idms" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_fic_cap" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_aud_proc" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_at_acc_ei" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                    </group>
                                    <group name="rc_edl_n_at_fr" string="Liste modele hors auto" attrs="{'invisible': [('rc_type_automobile', '!=', 'Non')]}">
                                        <field name="rc_edl_n_at_n_ppm" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_synt_amdec_proc"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_syn_fab" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_plan_surv"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_carac_spec"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_plan_piece"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_prec_ut" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_f_t_mat"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_rprt_ctrl" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_cap" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_fic_cond"  attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                        <field name="rc_edl_n_at_aud_proc" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_edl_n_at_acc_ei" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                    </group>
                                    <group string="Exigences qualité supplémentaires"  attrs="{'invisible': [('rc_doc_moule_assemblage', '=', False)]}">
                                        <field 
                                            name="rc_synthese_amdec_process_choix" 
                                            attrs="{
                                                'readonly': [('state', '!=', 'brouillon')],
                                                'invisible': [('rc_edl_at_syn_am_proc', '=', False),('rc_edl_n_at_synt_amdec_proc', '=', False)]
                                            }"  
                                        />
                                        <field name="rc_num_plan" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_num_dfn" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_num_cdc" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <field name="rc_eqs_comment" attrs="{'readonly': [('state', '!=', 'brouillon')]}"  />
                                        <separator string="Insertion de pièces jointes" />
                                        <field name="rc_eqs_pj" widget="many2many_binary" attrs="{'readonly': [('state', '!=', 'brouillon')]}" />
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" />
                        <field name="activity_ids" />
                        <field name="message_ids" />
                    </div>
                </form>
            </field>
        </record>

       <record model="ir.ui.view" id="view_is_revue_de_contrat_tree">
            <field name="name">view.is.revue.de.contrat.tree</field>
            <field name="model">is.revue.de.contrat</field>
            <field name="arch" type="xml">
                <tree string="Revue de contrat">
                    <field name="name"                     optional="show"/>
                    <field name="rc_mouleid"               optional="show" widget="many2one_clickable"/>
                    <field name="rc_dossierfid"            optional="show" widget="many2one_clickable"/>
                    <field name="rc_indice"                optional="show"/>
                    <field name="rc_doc_moule_assemblage"  optional="hide"/>
                    <field name="rc_type_automobile"       optional="show"/>
                    <field name="rc_projetid"              optional="show" widget="many2one_clickable"/>
                    <field name="rc_revue_contrat_assid"   optional="show" widget="many2one_clickable"/>
                    <field name="rc_ass_mouleid"           optional="show" widget="many2many_tags"/>
                    <field name="rc_client"                optional="show" widget="many2one_clickable"/>
                    <field name="rc_designation"           optional="show"/>
                    <field name="rc_daoid"                 optional="hide"  widget="many2one_clickable"/>
                    <field name="rc_commercial"            optional="hide"/>
                    <field name="rc_duration"              optional="hide"/>
                    <field name="rc_product_dest"          optional="hide"/>
                    <field name="rc_cust_wait"             optional="hide"/>
                    <field name="rc_done_study"            optional="hide" />
                    <field name="rc_cmd_date"              optional="show"/>
                    <field name="rc_dfn_ro_date"           optional="hide"/>
                    <field name="rc_first_m_try"           optional="hide"/>
                    <field name="rc_ei_pres"               optional="hide"/>
                    <field name="rc_dms_date"              optional="hide"/>
                    <field name="rc_eop_date"              optional="hide"/>
                    <field name="rc_eiv_total"             optional="hide" sum="Total"/>
                    <field name="rc_dfi_temp_occ_pm"       optional="hide"/>
                    <field name="rc_ca_annuel"             optional="hide" sum="Total"/>
                    <field name="rc_vac"                   optional="hide" sum="Total"/>
                    <field name="create_date"              optional="hide" string="Créé le"/>
                    <field name="create_uid"               optional="hide" string="Créé par"/>
                    <field name="write_date"               optional="hide" string="Modifié le"/>
                    <field name="write_uid"                optional="hide" string="Modifié par"/>
                    <field 
                        name="state" optional="show" readonly="1" widget="badge" 
                        decoration-muted="state == 'diffuse'" 
                        decoration-warning="state == 'brouillon'" 
                    />
                    <field name="dynacase_id"              optional="hide" groups="base.group_system"/>
                    <button title="Dynacase" name="lien_vers_dynacase_action" type="object" icon="fa-file" groups="base.group_system"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_is_revue_de_contrat_search">
            <field name="name">view.is.revue.de.contrat.search</field>
            <field name="model">is.revue.de.contrat</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="rc_mouleid"/>
                    <field name="rc_dossierfid"/>
                    <field name="rc_daoid"/>
                    <field name="state"/>
                </search>
            </field>
        </record>
        <record id="is_revue_de_contrat_pivot" model="ir.ui.view">
            <field name="name">is_revue_de_contrat_pivot</field>
            <field name="model">is.revue.de.contrat</field>
            <field name="arch" type="xml">
                <pivot>
                    <field name="rc_client"  type="row"/>
                </pivot>
            </field>
        </record>
        <record id="is_revue_de_contrat_graph" model="ir.ui.view">
            <field name="name">is_revue_de_contrat_graph</field>
            <field name="model">is.revue.de.contrat</field>
            <field name="arch" type="xml">
                <graph>
                    <field name="rc_client"  type="row"/>
                </graph>
            </field>
        </record>
        <record id="action_is_revue_de_contrat" model="ir.actions.act_window">
            <field name="name">Revue de contrat</field>
            <field name="res_model">is.revue.de.contrat</field>
            <field name="view_mode">tree,form,pivot,graph</field>
        </record>








        <!-- is.revue.de.contrat.version -->
       <record model="ir.ui.view" id="is_revue_de_contrat_version_tree">
            <field name="name">is_revue_de_contrat_version_tree</field>
            <field name="model">is.revue.de.contrat.version</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="is_revue_id" widget="many2one_clickable"/>

                    <field name="rc_dfi_version"        optional="show"/>
                    <field name="decomposition_prix_id" optional="hide"/>
                    <field name="rc_dfi_article"        optional="show"/>
                    <field name="rc_dfi_cycle"          optional="show"/>
                    <field name="rc_dfi_nb_emp"         optional="show"/>
                    <field name="rc_dfi_mod"            optional="show"/>
                    <field name="rc_dfi_taux_rebut"     optional="hide"/>

                    <field name="rc_dfi_matiere"              optional="show"/>
                    <field name="rc_dfi_poids_piece"          optional="show"/>
                    <field name="rc_dfi_poids_carotte"        optional="show"/>
                    <field name="rc_dfi_car_reb"              optional="show"/>
                    <field name="rc_dfi_car_reb_pourcentage"  optional="show"/>
                    <field name="rc_dfi_mat_prix_vendu"       optional="show"/>

                    <field name="rc_dfi_matiere2"             optional="hide"/>
                    <field name="rc_dfi_poids_piece2"         optional="hide"/>
                    <field name="rc_dfi_poids_carotte2"       optional="hide"/>
                    <field name="rc_dfi_car_reb2"             optional="hide"/>
                    <field name="rc_dfi_car_reb_pourcentage2" optional="hide"/>
                    <field name="rc_dfi_mat_prix_vendu2"      optional="hide"/>

                    <field name="rc_dfi_comp"                 optional="hide"/>
                    <field name="rc_dfi_comp_prix_vendu"      optional="hide"/>
                    <field name="rc_dfi_sous_traitance"       optional="hide"/>
                    <field name="rc_dfi_sous_traitance_prix"  optional="hide"/>
                    <field name="rc_dfi_desc_emb"             optional="hide"/>
                    <field name="rc_dfi_qte_carton"           optional="hide"/>
                    <field name="rc_dfi_qte_palette"          optional="hide"/>
                    <field name="rc_dfi_lot_liv"              optional="hide"/>
                    <field name="rc_dfi_multiple_liv"         optional="hide"/>
                    <field name="rc_dfi_lot_fab"              optional="hide"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="is_revue_de_contrat_version_form">
            <field name="name">is_revue_de_contrat_version_form</field>
            <field name="model">is.revue.de.contrat.version</field>
            <field name="arch" type="xml">
                <form>
                    <group col="3">
                        <group string="Version">
                            <field name="rc_dfi_version"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field 
                                name="decomposition_prix_id"      
                                attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" 
                                domain="[('id', 'in', parent.decomposition_prix_ids)]"
                            />
                            <field name="rc_dfi_article" readonly="1" force_save="1"/>
                            <field name="rc_dfi_cycle"               attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_nb_emp"              attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_mod"                 attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_taux_rebut"          attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                        </group>
                        <group string="Matière 1">
                            <field name="rc_dfi_matiere" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_poids_piece"         attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_poids_carotte"       attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_car_reb"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_car_reb_pourcentage" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_mat_prix_vendu" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                        </group>
                        <group string="Matière 2">
                            <field name="rc_dfi_matiere2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_poids_piece2"         attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_poids_carotte2"       attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_car_reb2"             attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_car_reb_pourcentage2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_mat_prix_vendu2" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                        </group>
                        <group string="Composants / Sous-traitance">
                            <field name="rc_dfi_comp" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_comp_prix_vendu" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}"/>
                            <field name="rc_dfi_sous_traitance" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_sous_traitance_prix" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                        </group>
                            <group string="Emballage">
                            <field name="rc_dfi_desc_emb" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_qte_carton" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_qte_palette" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_lot_liv" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_multiple_liv" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                            <field name="rc_dfi_lot_fab" attrs="{'readonly': [('parent.state', '!=', 'brouillon')]}" />
                        </group>
                    </group>
                </form>

            </field>
        </record>
        <record model="ir.ui.view" id="is_revue_de_contrat_version_search">
            <field name="name">is_revue_de_contrat_version_search</field>
            <field name="model">is.revue.de.contrat.version</field>
            <field name="arch" type="xml">
                <search>
                    <field name="is_revue_id"/>
                    <field name="rc_dfi_version"/>
                    <field name="rc_dfi_article"/>
                </search>
            </field>
        </record>
        <record id="is_revue_de_contrat_version_action" model="ir.actions.act_window">
            <field name="name">Revue de contrat - Versions</field>
            <field name="res_model">is.revue.de.contrat.version</field>
            <field name="view_mode">tree,form</field>
        </record>
    </data>
</odoo>
